import{_ as s,o as a,c as n,U as l}from"./chunks/framework.708a2299.js";const i=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/JavaScript/Web 性能压测工具 ApacheBench（ab）使用总结.md","filePath":"docs/JavaScript/Web 性能压测工具 ApacheBench（ab）使用总结.md"}'),p={name:"docs/JavaScript/Web 性能压测工具 ApacheBench（ab）使用总结.md"},o=l(`<p>导语 对于 web 服务，不管是上新，还是平时产品运营，节假日活动等，在这之前都需要评估现网压力承受能力，提前进行扩容，并做到防患于未然。所以对网站性能压力测试是必不可少的，这样才能充分了解自己部署的 web 服务 QPS。只有让服务器处在高压情况下才能真正体现出各种设置所暴露的问题。Apache 中有个自带的，名为 ab 的程序，可以对 Apache 或其它类型的服务器进行网站访问压力测试。</p><ol><li>ApacheBench 命令原理 ab 命令会创建很多的并发访问线程，模拟多个访问者同时对某一 URL 地址进行访问。它的测试目标是基于 URL 的，因此，既可以用来测试 Apache 的负载压力，也可以测试 nginx、lighthttp、tomcat、IIS 等其它 Web 服务器的压力。</li></ol><p>ab 命令对发出负载的计算机要求很低，既不会占用很高 CPU，也不会占用很多内存，但却会给目标服务器造成巨大的负载，其原理类似 CC 攻击。自己测试使用也须注意，否则一次上太多的负载，可能造成目标服务器因资源耗完，严重时甚至导致死机。</p><ol start="2"><li>ApacheBench 参数说明</li></ol><ol><li>Synopsis</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ab</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-A</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">auth-username:password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-b</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">windowsize</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-B</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">local-address</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-c</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">concurrency</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cookie-name=value</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">csv-file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">protocol</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gnuplot-file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-H</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">custom-header</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-k</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-l</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTP-method</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-n</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">POST-file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-P</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy-auth-username:password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-r</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">timeout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">timelimit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-T</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">content-type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PUT-file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verbosity]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-V</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> [ </span><span style="color:#C3E88D;">-x</span></span>
<span class="line"><span style="color:#FFCB6B;">-attributes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">]</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> -X proxy</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:port</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> -y-attributes </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-z</span><span style="color:#A6ACCD;">-attributes </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> -Z ciphersuite </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">://</span><span style="color:#89DDFF;">]</span><span style="color:#FFCB6B;">hostname[:port]/path</span></span></code></pre></div><ol start="2"><li>Options</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-n</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">perform</span></span></code></pre></div><p>//在测试会话中所执行的请求个数（本次测试总共要访问页面的次数）。默认时，仅执行一个请求。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-c</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">concurrency</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">multiple</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span></span></code></pre></div><p>//一次产生的请求个数（并发数）。默认是一次一个。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">timelimit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Seconds</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">max.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wait</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">responses</span></span></code></pre></div><p>//测试所进行的最大秒数。其内部隐含值是-n 50000。它可以使对服务器的测试限制在一个固定的总时间以内。默认时，没有时间限制。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">postfile</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">File</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">containing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">POST</span></span></code></pre></div><p>//包含了需要 POST 的数据的文件，文件格式如“p1=1&amp;p2=2”.使用方法是 -p 111.txt 。 （配合-T）</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-T</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">content-type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Content-type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">header</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">POSTing</span></span></code></pre></div><p>//POST 数据所使用的 Content-type 头信息，如 -T “application/x-www-form-urlencoded” 。 （配合-p）</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">verbosity</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">How</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">much</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">troubleshooting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">print</span></span></code></pre></div><p>//设置显示信息的详细程度 – 4 或更大值会显示头信息， 3 或更大值可以显示响应代码(404, 200 等), 2 或更大值可以显示警告和其他信息。 -V 显示版本号并退出。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Print</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">out</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">results</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTML</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tables</span></span></code></pre></div><p>//以 HTML 表的格式输出结果。默认时，它是白色背景的两列宽度的一张表。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HEAD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">instead</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">GET</span></span></code></pre></div><p>// 执行 HEAD 请求，而不是 GET。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tr</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">-z</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">String</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">td</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">th</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cookie,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eg.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">“c1=</span><span style="color:#F78C6C;">1234</span><span style="color:#C3E88D;">,c2=</span><span style="color:#F78C6C;">2</span><span style="color:#C3E88D;">,c3=</span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">”</span><span style="color:#A6ACCD;"> (repeatable)</span></span></code></pre></div><p>//-C cookie-name=value 对请求附加一个 Cookie:行。 其典型形式是 name=value 的一个参数对。此参数可以重复，用逗号分割。</p><p>提示：可以借助 session 实现原理传递 JSESSIONID 参数， 实现保持会话的功能，如</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">”</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c1=</span><span style="color:#F78C6C;">1234</span><span style="color:#C3E88D;">,c2=</span><span style="color:#F78C6C;">2</span><span style="color:#C3E88D;">,c3=</span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">JSESSIONID=FF056CD16DA9D71CB131C1D56F0319F8″</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">。</span></span>
<span class="line"><span style="color:#FFCB6B;">-H</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Arbitrary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">header</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">line,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eg.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">‘Accept-Encoding:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gzip’</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Inserted</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">after</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">normal</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">header</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lines.</span><span style="color:#A6ACCD;"> (repeatable)</span></span>
<span class="line"><span style="color:#FFCB6B;">-A</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Basic</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">WWW</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Authentication,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">colon</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">separated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password.</span></span>
<span class="line"><span style="color:#FFCB6B;">-P</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Basic</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Authentication,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">attributes</span></span>
<span class="line"><span style="color:#FFCB6B;">are</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">colon</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">separated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password.</span></span></code></pre></div><p>//-P proxy-auth-username:password 对一个中转代理提供 BASIC 认证信任。用户名和密码由一个:隔开，并以 base64 编码形式发送。无论服务器是否需要(即, 是否发送了 401 认证需求代码)，此字符串都会被发送。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">-X</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy:port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Proxyserver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">use</span></span>
<span class="line"><span style="color:#FFCB6B;">-V</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Print</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exit</span></span>
<span class="line"><span style="color:#FFCB6B;">-k</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">KeepAlive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">feature</span></span>
<span class="line"><span style="color:#FFCB6B;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">percentiles</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">served</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">table.</span></span>
<span class="line"><span style="color:#FFCB6B;">-S</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Do</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">confidence</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">estimators</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">warnings.</span></span>
<span class="line"><span style="color:#FFCB6B;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Output</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gnuplot</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">format</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file.</span></span>
<span class="line"><span style="color:#FFCB6B;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">filename</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Output</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CSV</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">percentages</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">served</span></span>
<span class="line"><span style="color:#FFCB6B;">-h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Display</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">usage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">information</span><span style="color:#A6ACCD;"> (this </span><span style="color:#C3E88D;">message</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>//-attributes 设置属性的字符串. 缺陷程序中有各种静态声明的固定长度的缓冲区。另外，对命令行参数、服务器的响应头和其他外部输入的解析也很简单，这可能会有不良后果。它没有完整地实现 HTTP/1.x; 仅接受某些’预想’的响应格式。 strstr(3) 的频繁使用可能会带来性能问题，即你可能是在测试 ab 而不是服务器的性能。</p><p>参数很多，常用的就两个，例如：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ab -c 1000 -n 100 http://10.50.120.121/test/blank\\</span></span></code></pre></div><ol start="3"><li>ApacheBench 用法详解 在 Linux 系统，一般安装好 Apache 后可以直接执行；</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#ab -k -n 100000 -c 500 -H &quot;Accept-Encoding: gzip, deflate, sdch&quot; -H &quot;User-Agent:Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 QQ/7.0.0.3002_GrayThree_309592_04-27_23:04 V1_IPH_SQ_7.0.0_5_HDBM_T Pixel/750 Core/UIWebView NetType/WIFI QBWebViewType/1&quot; -C &quot;uin=o0369491785;skey=@MC7dyF5lu;&quot; http://10.51.170.39/sport/home?_wv=2163715</span></span></code></pre></div><p>如果是 win 系统下，打开 cmd 命令行窗口，cd 到 apache 安装目录的 bin 目录下</p><p>上述命令的含义是：</p><p>在长连接状态下，模拟移动端，请求头带 gzip 压缩，并且带登录态，一次 500 个并发，总请求量为 100000，向指定机器 IP 和页面的 URL 发送请求 URL 也可以是域名，本地配置 HOST 指向要压测的机器 IP 也可以~</p><p>稍等片刻，执行结果及分析如下：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ApacheBench,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Version</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">$Revision</span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">655654</span><span style="color:#A6ACCD;"> $</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">Copyright</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1996</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Adam</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Twiss,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Zeus</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Technology</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Ltd,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://www.zeustech.net/</span></span>
<span class="line"><span style="color:#FFCB6B;">Licensed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Apache</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Software</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Foundation,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Benchmarking</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10.51</span><span style="color:#C3E88D;">.170.39</span><span style="color:#A6ACCD;"> (be </span><span style="color:#C3E88D;">patient</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">40000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">70000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Completed</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Finished</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Software:</span><span style="color:#A6ACCD;">                         </span><span style="color:#C3E88D;">//测试服务端类型</span></span>
<span class="line"><span style="color:#FFCB6B;">Server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Hostname:</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">10.51</span><span style="color:#C3E88D;">.170.39</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">//测试服务器</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HOST</span></span>
<span class="line"><span style="color:#FFCB6B;">Server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Port:</span><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">//测试服务端端口号</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Document</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Path:</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">/sport/home?_wv=</span><span style="color:#F78C6C;">2163715</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">URI</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">parsed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">line</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">string.</span></span>
<span class="line"><span style="color:#FFCB6B;">Document</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Length:</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">62346</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;">               </span><span style="color:#C3E88D;">//This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">size</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">first</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successfully</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">returned</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">document.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">If</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">document</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">length</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">changes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">during</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">testing,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">considered</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">an</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">error.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Concurrency</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Level:</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;">                       </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">concurrent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clients</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">used</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">during</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#FFCB6B;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taken</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests:</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">158.969</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">seconds</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">//This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">taken</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">moment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">first</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">socket</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connection</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">created</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">moment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">last</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">received</span></span>
<span class="line"><span style="color:#FFCB6B;">Complete</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests:</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">100000</span><span style="color:#A6ACCD;">                    </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successful</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">responses</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">received</span></span>
<span class="line"><span style="color:#FFCB6B;">Failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests:</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">                         </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">were</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">considered</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failure.</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Write</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">errors:</span><span style="color:#A6ACCD;">           </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">                         </span><span style="color:#C3E88D;">//he</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">errors</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">during</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">write</span><span style="color:#A6ACCD;"> (broken </span><span style="color:#C3E88D;">pipe</span><span style="color:#A6ACCD;">).</span></span>
<span class="line"><span style="color:#FFCB6B;">Keep-Alive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests:</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">100000</span><span style="color:#A6ACCD;">                    </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connections</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">resulted</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Keep-Alive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span></span>
<span class="line"><span style="color:#FFCB6B;">Total</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transferred:</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">6266233588</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">total</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">received</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">essentially</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">over</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">wire.</span></span>
<span class="line"><span style="color:#FFCB6B;">HTML</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">transferred:</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">6236217388</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;">          </span><span style="color:#C3E88D;">//The</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">total</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">document</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">received</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">server.</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">This</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">number</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">excludes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">received</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">headers</span></span>
<span class="line"><span style="color:#FFCB6B;">Requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">per</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">second:</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">629.05</span><span style="color:#A6ACCD;"> [#/sec] </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">mean</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">     //This is the number of requests per second. This value is the result of dividing the number of requests by the total </span><span style="color:#F78C6C;">time</span><span style="color:#A6ACCD;"> taken</span></span>
<span class="line"><span style="color:#FFCB6B;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">per</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request:</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">794.847</span><span style="color:#A6ACCD;"> [ms] </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">mean</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">       //The average </span><span style="color:#F78C6C;">time</span><span style="color:#A6ACCD;"> spent per request. The first value is calculated with the formula concurrency </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> timetaken </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> 1000 / </span><span style="color:#89DDFF;font-style:italic;">done</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">second</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">calculated</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">formula</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">timetaken</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">done</span></span>
<span class="line"><span style="color:#FFCB6B;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">per</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request:</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">1.590</span><span style="color:#A6ACCD;"> [ms] </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">mean,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">across</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">concurrent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">Transfer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rate:</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">38494.01</span><span style="color:#A6ACCD;"> [Kbytes/sec] received            //The rate of transfer as calculated by the formula totalread / 1024 / timetaken</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Connection</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Times</span><span style="color:#A6ACCD;"> (ms)</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#FFCB6B;">min</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">mean[+/-sd]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">median</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">max</span></span>
<span class="line"><span style="color:#FFCB6B;">Connect:</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">2.1</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">34</span></span>
<span class="line"><span style="color:#FFCB6B;">Processing:</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">296</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">793</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">151.5</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">809</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2962</span></span>
<span class="line"><span style="color:#FFCB6B;">Waiting:</span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">232</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">690</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">153.2</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">713</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2724</span></span>
<span class="line"><span style="color:#FFCB6B;">Total:</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">296</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">793</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">152.1</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">809</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2992</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//整个场景中所有请求的响应情况。在场景中每个请求都有一个响应时间，其中</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#C3E88D;">％的用户响应时间小于</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">809</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">毫秒，66％的用户响应时间小于</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">854</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">毫秒，最大的响应时间小于</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2992</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">毫秒。对于并发请求，cpu</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">实际上并不是同时处理的，而是按照每个请求获得的时间片逐个轮转处理的，所以基本上第一个</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">per</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">时间约等于第二个</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Time</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">per</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">request</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">时间乘以并发请求数。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Percentage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">the</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">requests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">served</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">within</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">certain</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">time</span><span style="color:#A6ACCD;"> (ms)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">50%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">809</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">66%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">854</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">75%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">881</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">80%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">899</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">90%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">947</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">95%</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">998</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">98%</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1075</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">99%</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1146</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">100%</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">2992</span><span style="color:#A6ACCD;"> (longest </span><span style="color:#C3E88D;">request</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><ol start="4"><li>总结 一般我们在对 web 服务器进行压力测试时，建议使用内网的另一台或者多台服务器通过内网进行测试，这样得出的数据，准确度会高很多。如果只有单独的一台服务器，可以直接本地测试，比远程测试效果要准确。</li></ol><p>参考文档：</p><p><a href="https://httpd.apache.org/docs/2.4/programs/ab.html" target="_blank" rel="noreferrer">https://httpd.apache.org/docs/2.4/programs/ab.html</a></p>`,42),e=[o];function C(t,c,r,y,A,D){return a(),n("div",null,e)}const F=s(p,[["render",C]]);export{i as __pageData,F as default};
